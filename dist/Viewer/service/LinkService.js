var _a,_PDFLinkService_isValidExplicitDest,LinkTarget,__awaiter=this&&this.__awaiter||function(e,o,a,l){return new(a=a||Promise)(function(i,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function n(e){try{s(l.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?i(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,n)}s((l=l.apply(e,o||[])).next())})};let DEFAULT_LINK_REL="noopener noreferrer nofollow";(e=>{e[e.NONE=0]="NONE",e[e.SELF=1]="SELF",e[e.BLANK=2]="BLANK",e[e.PARENT=3]="PARENT",e[e.TOP=4]="TOP"})(LinkTarget=LinkTarget||{});class PDFLinkService{constructor({externalLinkTarget:e=null,externalLinkRel:t=null,ignoreDestinationZoom:i=!1}={}){this.externalLinkEnabled=!0,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this.externalLinkTarget=e,this.externalLinkRel=t,this._ignoreDestinationZoom=i}setDocument(e,t=null){this.baseUrl=t,this.pdfDocument=e}setViewer(e){console.log("Called ===============>"),this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfDocument?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfDocument&&(this.pdfViewer.currentPageNumber=e)}get rotation(){return this.pdfDocument?this.pdfViewer.pagesRotation:0}set rotation(e){this.pdfDocument&&(this.pdfViewer.pagesRotation=e)}get isInPresentationMode(){return!!this.pdfDocument&&this.pdfViewer.isInPresentationMode}goToDestination(n){return __awaiter(this,void 0,void 0,function*(){if(this.pdfDocument){let e,t,i=null;if(console.log("Dest: ",n),t="string"==typeof n?(e=n,yield this.pdfDocument.getDestination(n)):(e=null,yield n),Array.isArray(t)){var[r]=t;if(r&&"object"==typeof r){if(!(i=this.pdfDocument.cachedPageNumber(r)))try{i=(yield this.pdfDocument.getPageIndex(r))+1}catch(e){return void console.error(`goToDestination: "${r}" is not a valid page reference, for dest="${n}".`)}}else Number.isInteger(r)&&(i=r+1);!i||i<1||i>this.pagesCount?console.error(`goToDestination: "${i}" is not a valid page number, for dest="${n}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:e,explicitDest:t,pageNumber:i})),console.log("Page number:",i),this.pdfViewer.scrollPageIntoView({pageNumber:i,destArray:t,ignoreDestinationZoom:this._ignoreDestinationZoom}))}else console.error(`goToDestination: "${t}" is not a valid destination array, for dest="${n}".`)}})}goToPage(e){var t;this.pdfDocument&&(t="string"==typeof e&&this.pdfViewer.pageLabelToPageNumber(e)||e||0,Number.isInteger(t)&&0<t&&t<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(t)),this.pdfViewer.scrollPageIntoView({pageNumber:t})):console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`))}addLinkAttributes(e,t,i=!1){if(!t||"string"!=typeof t)throw new Error('A valid "url" parameter must provided.');var i=i?LinkTarget.BLANK:this.externalLinkTarget,r=this.externalLinkRel;this.externalLinkEnabled?e.href=e.title=t:(e.href="",e.title="Disabled: "+t,e.onclick=()=>!1);let n="";switch(i){case LinkTarget.SELF:n="_self";break;case LinkTarget.BLANK:n="_blank";break;case LinkTarget.PARENT:n="_parent";break;case LinkTarget.TOP:n="_top"}e.target=n,e.rel="string"==typeof r?r:DEFAULT_LINK_REL}getDestinationHash(e){return"string"==typeof e?this.getAnchorUrl("#"+escape(e)):Array.isArray(e)?this.getAnchorUrl("#"+escape(JSON.stringify(e))):this.getAnchorUrl("")}getAnchorUrl(e){return console.log("here here"),this.baseUrl?this.baseUrl+e:e}setHash(e){this.pdfDocument}executeNamedAction(e){var t;if(this.pdfDocument)switch(e){case"GoBack":null!=(t=this.pdfHistory)&&t.back();break;case"GoForward":null!=(t=this.pdfHistory)&&t.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}}executeSetOCGState(i){return __awaiter(this,void 0,void 0,function*(){var e,t;this.pdfDocument&&(e=this.pdfDocument,t=yield this.pdfViewer.optionalContentConfigPromise,e===this.pdfDocument)&&(t.setOCGState(i),this.pdfViewer.optionalContentConfigPromise=Promise.resolve(t))})}}_a=PDFLinkService,_PDFLinkService_isValidExplicitDest=function(e){if(!Array.isArray(e)||e.length<2)return!1;var[e,t,...i]=e;if(!("object"==typeof e&&Number.isInteger(null==e?void 0:e.num)&&Number.isInteger(null==e?void 0:e.gen)||Number.isInteger(e)))return!1;if("object"!=typeof t||"string"!=typeof(null==t?void 0:t.name))return!1;let r=!0;switch(t.name){case"XYZ":if(i.length<2||3<i.length)return!1;break;case"Fit":case"FitB":return 0===i.length;case"FitH":case"FitBH":case"FitV":case"FitBV":if(1<i.length)return!1;break;case"FitR":if(4!==i.length)return!1;r=!1;break;default:return!1}return i.every(e=>"number"==typeof e||r&&null===e)};export{PDFLinkService,LinkTarget,DEFAULT_LINK_REL};