var LinkTarget,__awaiter=this&&this.__awaiter||function(e,s,a,l){return new(a=a||Promise)(function(i,t){function r(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?i(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,n)}o((l=l.apply(e,s||[])).next())})};(e=>{e[e.NONE=0]="NONE",e[e.SELF=1]="SELF",e[e.BLANK=2]="BLANK",e[e.PARENT=3]="PARENT",e[e.TOP=4]="TOP"})(LinkTarget=LinkTarget||{});class PDFLinkService{constructor(e={}){this.externalLinkEnabled=!0,this.baseUrl=e.baseUrl||null,this.pdfDocument=e.pdfDocument||null,this.pdfViewer=e.pdfViewer||null,this.pdfHistory=e.pdfHistory||null,this.externalLinkTarget=e.externalLinkTarget||LinkTarget.NONE,this.externalLinkRel=e.externalLinkRel||"noopener noreferrer nofollow",this._ignoreDestinationZoom=e.ignoreDestinationZoom||!1}setDocument(e,t=null){this.pdfDocument=e,this.baseUrl=t}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer?this.pdfViewer.currentPageNumber:1}set page(e){this.pdfViewer}get rotation(){return 0}set rotation(e){this.pdfViewer}get isInPresentationMode(){return!1}goToDestination(o){return __awaiter(this,void 0,void 0,function*(){if(this.pdfDocument){let e=null,t,i;if(t="string"==typeof o?(e=o,yield this.pdfDocument.getDestination(o)):yield o,Array.isArray(t)){var r=t[0];if(r&&"object"==typeof r){if(!(i="function"==typeof this.pdfDocument.cachedPageNumber?this.pdfDocument.cachedPageNumber(r):i))try{var n=yield this.pdfDocument.getPageIndex(r);i=n+1}catch(e){return void console.error(`goToDestination: "${r}" is not a valid page reference, for dest="${o}".`,e)}}else Number.isInteger(r)&&(i=r+1);!i||i<1||i>this.pagesCount?console.error(`goToDestination: "${i}" is not a valid page number, for dest="${o}".`):(this.pdfHistory&&("function"==typeof this.pdfHistory.pushCurrentPosition&&this.pdfHistory.pushCurrentPosition(),"function"==typeof this.pdfHistory.push)&&this.pdfHistory.push({namedDest:e,explicitDest:t,pageNumber:i}),this.pdfViewer?this.goToPage(i):console.error("PDF viewer is not set or does not support scrolling."))}else console.error(`goToDestination: "${t}" is not a valid destination array, for dest="${o}".`)}else console.error("PDF document is not set.")})}goToPage(e){console.log("goToPage called with:",e),this.pdfViewer?(e="string"==typeof e?parseInt(e,10):e,this.pdfViewer.goToPage(e)):console.warn("No PDF viewer set for goToPage.")}addLinkAttributes(e,t,i=!1){if(!t||"string"!=typeof t)throw new Error('A valid "url" parameter must be provided.');e.href=t,e.title=t;let r="";switch(i?LinkTarget.BLANK:this.externalLinkTarget){case LinkTarget.SELF:r="_self";break;case LinkTarget.BLANK:r="_blank";break;case LinkTarget.PARENT:r="_parent";break;case LinkTarget.TOP:r="_top";break;default:r=""}e.target=r,e.rel=this.externalLinkRel}getDestinationHash(e){return"string"==typeof e?"#"+escape(e):"#"+escape(JSON.stringify(e))}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){console.log("setHash called with:",e),window.location.hash=e}executeNamedAction(e){console.log("executeNamedAction called with:",e)}executeSetOCGState(e){return __awaiter(this,void 0,void 0,function*(){console.log("executeSetOCGState called with:",e)})}}export{LinkTarget,PDFLinkService};