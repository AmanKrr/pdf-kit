var __awaiter=this&&this.__awaiter||function(e,o,s,p){return new(s=s||Promise)(function(n,t){function a(e){try{i(p.next(e))}catch(e){t(e)}}function r(e){try{i(p.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(a,r)}i((p=p.apply(e,o||[])).next())})};import{AnnotationLayer as ALayer}from"pdfjs-dist";import{aPdfViewerClassNames,aPdfViewerIds}from"../../constant/ElementIdClass";import TextLayer from"./TextLayer";import PageElement from"./PageElement";import{PDFLinkService}from"../service/LS";class AnnotationLayer extends PageElement{constructor(e,t,n){super(),this.pageWrapper=e,this.page=t,this.viewport=n}createAnnotationLayer(n,a){return __awaiter(this,void 0,void 0,function*(){var e=TextLayer.createLayers(aPdfViewerClassNames._A_ANNOTATION_LAYER,aPdfViewerIds._ANNOTATION_LAYER,this.viewport),t=(this.pageWrapper.appendChild(e),yield this.page.getAnnotations());return yield new ALayer({div:e,page:this.page,viewport:this.viewport,accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,structTreeLayer:null}).render({viewport:this.viewport.clone({dontFlip:!0}),div:e,annotations:t,page:this.page,linkService:new PDFLinkService({pdfDocument:a,pdfViewer:n}),renderForms:!1}),e})}}export default AnnotationLayer;