import{aPdfViewerClassNames,aPdfViewerIds}from"../../constant/ElementIdClass";import WebUiUtils from"../../utils/WebUiUtils";import PdfState from"./PdfState";class Toolbar{constructor(e,t,a){this.container=document.getElementById(e),this.buttons=[],this._viewer=a,this.toolbar={firstPage:!0,previousPage:!0,nextPage:!0,lastPage:!0,pageNumber:!0,zoomIn:!0,zoomOut:!0,rotate:!1,print:!1,download:!1,search:!1,annotation:{signature:!1,drawing:!1,stamp:!1,circle:!1,rectangle:!1,line:!1}},this.toolbarClass={firstPage:"a-first-page-container",previousPage:"a-previous-page-container",nextPage:"a-next-page-container",lastPage:"a-last-page-container",pageNumber:"a-page-number-container",zoomIn:"a-zoom-in-container",zoomOut:"a-zoom-out-container",rotate:"a-rotate-container",print:"a-print-container",download:"a-download-container",search:"a-search-container",annotation:{signature:"",drawing:"",stamp:"",circle:"",rectangle:"",line:""}},this.toolbarConfig=this.getToolbarData(),this.renderToolbar()}setToolbar(e={}){this.toolbar=Object.assign(Object.assign({},this.toolbar),e),this.renderToolbar()}getToolbar(){return this.toolbar}removeToolbar(){this.toolbar={}}getToolbarData(){return[{id:"firstPage",label:"First Page",icon:"first-page-icon",onClick:e=>this._viewer.firstPage(),hide:!1,class:this.toolbarClass.firstPage+"-icon"},{id:"previousPage",label:"Previous Page",icon:"previous-page-icon",onClick:e=>this._viewer.previousPage(),hide:!1,class:this.toolbarClass.previousPage+"-icon"},{id:"nextPage",label:"Next Page",icon:"next-page-icon",onClick:e=>this._viewer.nextPage(),hide:!1,class:this.toolbarClass.nextPage+"-icon"},{id:"lastPage",label:"Last Page",icon:"last-page-icon",onClick:e=>this._viewer.lastPage(),hide:!1,class:this.toolbarClass.lastPage+"-icon"},{id:"pageNumber",label:"Page Number",type:"custom",render:()=>Toolbar.renderPageNumberControls(this._viewer),onClick:e=>console.log("clicked"),hide:!1},{id:"zoomIn",label:"Zoom In",icon:"zoom-in-icon",onClick:e=>this._viewer.zoomIn(),isSeparatorBefore:!0,hide:!1,class:this.toolbarClass.zoomIn+"-icon"},{id:"zoomOut",label:"Zoom Out",icon:"zoom-out-icon",onClick:e=>this._viewer.zoomOut(),class:this.toolbarClass.zoomOut+"-icon",hide:!1}]}renderToolbar(){let a=document.getElementById("toolbarContainer");a&&(a.innerHTML="",this.toolbarConfig.forEach(e=>{var t;e.hide||(e.isSeparatorBefore&&this.addSeparator(a),"custom"===e.type&&e.render?(t=e.render(this),a.appendChild(t)):(t=this.createToolbarButton(e),(e=this.parentWrapper(e)).appendChild(t),a.appendChild(e)))}),console.log("here",PdfState.getInstance()),WebUiUtils.hideLoading(PdfState.getInstance()._uiLoading))}createToolbarButton(e){var t=document.createElement("button"),a=(t.classList.add("a-toolbar-button"),document.createElement("span"));return a.setAttribute("class","a-toolbar-icon "+e.class),t.appendChild(a),t.addEventListener("click",()=>e.onClick(this)),t}parentWrapper(e){var t=document.createElement("div");return t.setAttribute("class",(aPdfViewerClassNames._A_TOOLBAR_ITEM+` ${aPdfViewerClassNames._A_TOOLBAR_TOOLTIP} `+(null!=e&&e.key?this.toolbarClass[e.key]:"")).trim()),t}addSeparator(e){var t=document.createElement("div");t.classList.add("a-toolbar-item-separator"),e.appendChild(t)}static renderPageNumberControls(t){var e=document.createElement("div"),a=(e.setAttribute("id",aPdfViewerIds._INPUT_PAGE_NUMBER),e.setAttribute("class",aPdfViewerClassNames._A_PAGE_INPUT_CONTAINER),document.createElement("input")),a=(a.setAttribute("type","number"),a.setAttribute("id",aPdfViewerIds._CURRENT_PAGE_INPUT),a.setAttribute("class",aPdfViewerClassNames._A_CURRENT_PAGE_NUMBER_INPUT_FIELD),a.setAttribute("autocomplete","off"),a.setAttribute("aria-label","Current page number"),a.value=String(PdfState.getInstance()._currentPage),a.oninput=e=>t.toolbarButtonClick("currentPageNumber",e),a.onkeydown=e=>t.toolbarButtonClick("currentPageNumber",e),e.appendChild(a),document.createElement("div")),o=document.createElement("p"),o=(o.textContent="of",a.appendChild(o),document.createElement("div")),r=document.createElement("p"),r=(r.textContent=String(PdfState.getInstance()._pdfInstance.numPages),o.appendChild(r),document.createElement("div"));return r.setAttribute("class",aPdfViewerClassNames._A_TOOLBAR_ITEM+` ${aPdfViewerClassNames._A_TOOLBAR_TOOLTIP} a-page-number-container`),r.appendChild(e),r.appendChild(a),r.appendChild(o),r}}export default Toolbar;