var __awaiter=this&&this.__awaiter||function(e,i,p,_){return new(p=p||Promise)(function(r,t){function a(e){try{o(_.next(e))}catch(e){t(e)}}function n(e){try{o(_.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof p?t:new p(function(e){e(t)})).then(a,n)}o((_=_.apply(e,i||[])).next())})};import PageElement from"./PDFPageElement";import{PDF_VIEWER_CLASSNAMES,PDF_VIEWER_IDS}from"../../constants/pdf-viewer-selectors";import{TextLayer as pdfjsTextLayer}from"pdfjs-dist";class TextLayer extends PageElement{constructor(e,t,r){super(),this._pageWrapper=e,this._page=t,this._viewport=r}createTextLayer(){return __awaiter(this,void 0,void 0,function*(){var e=PageElement.createLayers(PDF_VIEWER_CLASSNAMES.ATEXT_LAYER,PDF_VIEWER_IDS.TEXT_LAYER,this._viewport),t=(this._pageWrapper.appendChild(e),PageElement.createLayers(PDF_VIEWER_CLASSNAMES.AANNOTATION_DRAWING_LAYER,PDF_VIEWER_IDS.ANNOTATION_DRAWING_LAYER,this._viewport)),r=(this._pageWrapper.appendChild(t),yield this._page.getTextContent()),r=new pdfjsTextLayer({textContentSource:r,container:e,viewport:this._viewport});return yield r.render(),r.textDivs.forEach(e=>{e.onclick=e=>console.log("Coming soon")}),[e,t]})}_wrapTextLayerIntoPTag(){var e,t;this._pageWrapper&&(e=this._pageWrapper.querySelector("."+PDF_VIEWER_CLASSNAMES.ATEXT_LAYER))&&(t=e.innerHTML,e.innerHTML="",e.innerHTML=`<p>${t}</p>`.replaceAll('<br role="presentation">',""))}copyAndPateText(){var e;this._pageWrapper&&(e=this._pageWrapper.querySelector("."+PDF_VIEWER_CLASSNAMES.ATEXT_LAYER))&&(e.onkeydown=this.keyDown)}keyDown(e){console.log(e)}}export default TextLayer;