var __awaiter=this&&this.__awaiter||function(e,o,s,p){return new(s=s||Promise)(function(n,t){function r(e){try{a(p.next(e))}catch(e){t(e)}}function i(e){try{a(p.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}a((p=p.apply(e,o||[])).next())})};import{AnnotationLayer as ALayer}from"pdfjs-dist";import{PDF_VIEWER_CLASSNAMES,PDF_VIEWER_IDS}from"../../constants/pdf-viewer-selectors";import TextLayer from"./PDFTextLayer";import{PDFLinkService}from"../services/LS";import PageElement from"./PDFPageElement";class AnnotationLayer extends PageElement{constructor(e,t,n){super(),this._pageWrapper=e,this._page=t,this._viewport=n}createAnnotationLayer(n,r){return __awaiter(this,void 0,void 0,function*(){var e=TextLayer.createLayers(PDF_VIEWER_CLASSNAMES.AANNOTATION_LAYER,PDF_VIEWER_IDS.ANNOTATION_LAYER,this._viewport),t=(this._pageWrapper.appendChild(e),yield this._page.getAnnotations());return yield new ALayer({div:e,page:this._page,viewport:this._viewport,accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,structTreeLayer:null}).render({viewport:this._viewport.clone({dontFlip:!0}),div:e,annotations:t,page:this._page,linkService:new PDFLinkService({pdfDocument:r,pdfViewer:n}),renderForms:!1}),e})}}export default AnnotationLayer;