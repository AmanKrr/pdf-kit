var __awaiter=this&&this.__awaiter||function(e,i,s,c){return new(s=s||Promise)(function(r,t){function n(e){try{a(c.next(e))}catch(e){t(e)}}function o(e){try{a(c.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}a((c=c.apply(e,i||[])).next())})},__rest=this&&this.__rest||function(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r};import WebViewer from"../Viewer/components/WebViewer";import WebUiUtils from"../utils/WebUiUtils";import PdfState from"../Viewer/components/PdfState";import PageElement from"../Viewer/components/PageElement";import PasswordManager from"../Viewer/manager/Password";import"../style/toolbar.css";import"../style/root.css";import"../style/textlayer.css";import"../style/thumbnail.css";import"../style/annotationlayer.css";import"../style/annotationDrawerLayer.css";import{GlobalWorkerOptions,getDocument}from"pdfjs-dist";GlobalWorkerOptions.workerSrc=new URL("pdfjs-dist/build/pdf.worker.min.mjs",import.meta.url).href;class WebPdf{static load(d){return __awaiter(this,void 0,void 0,function*(){var e=PdfState.getInstance(d.containerId);e.containerId=d.containerId;let n=PageElement.containerCreation(d.containerId,e.scale);var t=document.querySelector(`#${d.containerId} #`+n.injectElementId),r=WebUiUtils.showLoading();e.uiLoading=r,n.parent.prepend(r.parentNode);try{var o=d.password,a=__rest(d,["password"]),i=Object.assign(Object.assign({},a),d),s=getDocument({url:d.document,password:o,withCredentials:d.withCredentials,data:d.data,httpHeaders:d.httpHeaders});let r=null;s.onPassword=function(e,t){1===t?r=r||new PasswordManager(n.parent,e):r&&(r.onError="Incorrect! Enter password again:")};var c=yield s.promise,l=(e.pdfInstance=c,r&&r.destroy(),new WebViewer(c,i,n.parent,t));return l}catch(e){console.error("Error loading PDF:",e)}})}}export default WebPdf;