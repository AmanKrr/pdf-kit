var __awaiter=this&&this.__awaiter||function(e,a,s,c){return new(s=s||Promise)(function(n,t){function i(e){try{r(c.next(e))}catch(e){t(e)}}function o(e){try{r(c.throw(e))}catch(e){t(e)}}function r(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,o)}r((c=c.apply(e,a||[])).next())})};import*as pdfjsLib from"pdfjs-dist/webpack.mjs";import WebViewer from"../Viewer/components/WebViewer";import WebUiUtils from"../utils/WebUiUtils";import{PDFLinkService}from"../Viewer/service/LinkService";import PdfState from"../Viewer/components/PdfState";import PageElement from"../Viewer/components/PageElement";import TextLayer from"../Viewer/components/TextLayer";import Annotation from"../Viewer/components/Annotation";import"../style/toolbar.css";import"../style/root.css";import"../style/textlayer.css";import"../style/annotationlayer.css";class WebPdf extends WebViewer{constructor(){super(...arguments),this.isloading=!0}static load(b){return __awaiter(this,void 0,void 0,function*(){var e=PageElement.containerCreation(b.containerId),t=document.getElementById(e.injectElementId),n=b.renderSpecificPageOnly,i=WebUiUtils.showLoading();e.parent.prepend(i.parentNode);try{this.loadOptions=Object.assign(Object.assign({},this.loadOptions),b);var o=yield pdfjsLib.getDocument(b.document).promise,r=new PDFLinkService,a=new TextLayer,s=new Annotation;for(let e=n||1;e<=(n||o.numPages);e++){var c,l=yield o.getPage(e),d=this.scale,p=l.getViewport({scale:d}),m=PageElement.createPageContainerDiv(e,p),[f,w]=(t.appendChild(m),PageElement.createCanvas(p)),y=(m.appendChild(f),{canvasContext:w,viewport:p,annotationMode:2});yield l.render(y).promise,b.disableTextSelection||(c=yield a.createTextLayer(m,t,l,p),yield s.createAnnotationLayer(m,c,l,p,r))}var u=new WebViewer(o,i);return r.setViewer(u),r.setDocument(o),u}catch(e){console.error("Error",e)}})}}WebPdf.loadOptions={containerId:"",document:"",disableTextSelection:!1,maxDefaultZoomLevel:400,password:"",printMode:!1,toolbarItems:[],styleSheets:"",preventTextCopy:!1,renderSpecificPageOnly:null},WebPdf.scale=PdfState.getInstance()._scale;export default WebPdf;